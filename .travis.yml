addons:
  ssh_known_hosts:
    - 46.101.136.26
  apt:
    packages:
      - sshpass
language: node_js
node_js:
- '4.1'
install: npm install
before_script:
- mysql -u root < ./database/createDB.sql
- npm install -g mocha
after_success:
- mkdir build
- mv * build
- tar -czf package.tgz build
- export SSHPASS=$DEPLOY_PASS
- sshpass -e scp -o stricthostkeychecking=no package.tgz $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_PATH
- sshpass -e ssh $DEPLOY_USER@$DEPLOY_HOST $DEPLOY_PATH/deploy.sh
env:
  global:
  - secure: "XHOG6seMrHaChSu2STolvRMaZhJ2XcoFtTyPhs6nAQuAmCzYy+JCN8nPHw8dKQGAD2A1Fif7YMyTXR/Jbg21wyQDMLqXLIrhyrPOMWhrMcajWWRU7kypHjLoOMSOfPQ+E/a57XYoLGo3rhYk3gXVD1kKb3CRQqUnQOYQJwTj8TBh66VWgiyzflUeBZw1fvPTDDA4zlrYH3zy3Q2binAXXkTYr69s6SyPkYIROJGaU+7z/rN1xtDJQhXzObGyN1cntcFre0ojkWtAQYR13VzzG7r9NLbC47cOH5Nbk4oVY0C9YEYALLS/DvkiQYZrS0oLFEMA21RYNUEdZSn2nIx5zRoRfnhZhrD8Kmw/OKZwTjvKnEZAVPLretOBsPZOfmXD4QFhJnDW2WDcu1M9bct0WCazGG++ZjKf44UnYeC/coTMAjxm8WoLYyhcgesOBYkbjf63jNZiGScZMAVtFo8UzSRLUcV1UU1px6KW6zTb03wUjWIdxQLBm8ZlZlKM8A5nYSHsBALyPEoSecQsDkolzIGKh6CWcb9jEpyP6ltdHrwvPtB+ls3eXc3pcdkq0/bomzwg4STzxk/BIkyXlS+cUXv1xuLWK0r+bLz/i5XGNwuHUcFWU9/9xVWWUpzRoqt2PU21pVctN++5eY/2DPG1NTTabNxIZCeru80mFZPFOrc="
  - secure: "OpHU0goQVv0+QF/eMBQcuNy83S8BZZCnQqLm7yOUPCyVX4g4FtF21XZOPDCca+QcmaVKAQSklrGzMwbK8SBImLyhRiaGYYwdFLeErnzt5JspdOb/pIw0ZNEw7AjKJOr1aEMxzLUE3TiQumM/3cYoRcmjaz7Rjh9O4GudvD6rJsu8EJhJAImgiWG6llSSKbBNwqM1T80ohDhy5hRav3XSSteJMj6ALK63bl0HiSrpv/BZwMWKfZpYjdqoFtYqh143F+IDlJnWhy2HJCjorsh2/1+Vkg5cicusy1njvRszH0z9Rrjhfo4juQWyiYDKLRYXtlXxdSk1P/7LLS2asuEmlhW+g3Zcp0Fl7XE0jiENFZuf0A835wzAJSUoQihVj5l3D9WBAbP0LoLN2AkFQ2VaE5D7NeMAgGBrbnR4QKLMUw4mhyTBQlbj8TQkak4kWqawfaoNz15ayeisivWNl08PFTlCOrjysx7G9B5QW2eviRqHPo6bFQ7zp4U+rOPcLEQHu7DCelH5H7jrT/7RIi4/+3duqBOEttefrF7T5x5EJBftKGwS0FeMYLjw5iVESnE/Dc0zEegZFa0o50ghLqoRaCf0QS6wYoEghACYZ1+ozrjFEEp5gMA+a13iK/l5x9gaq7DvcwzEbnp6vr/xZiBdEVQXqc9G3YdQIzyCk/Kw9wU="
  - secure: "rNu3mKaLp4Eejc3eXBCHNHK3trLWquNlrS+xYBmPB/3Kxz9aqRP1xQfc+FsldOcFfRgkPs8RUNqgrTsdJD+/T/5Pn0QBJ3pyOLQ0YKWBlh/gv7e4dkTdqorccpSnwJstEyp04RK5seDf+NA5sNdXPZfFReH1dmuZntcOsyy0709qHOoCx2EULgIefuhf3Uz56q51RjLyRDUOxaI3G02jlnG+wqiH0ZjZ58+z7RKOSOCKR77nI5ftw2yFQ21+iDDjPT5XUHOcP632waGR2mOnOzomAU7an4VKUuzIcaP7tcUBM9uWibRYS4l6KhGNwydLGdct9CO2vruMXKjq4M+21HHd9tebd+y+easoFdTJAnAcXeFFUMI6q/B3IO6hDAysBbjF7V/+XYoL/8lw+wdl+/HaMYR+rqyTMnO1HfXTPE9wt5963NuMM6TL206Kf+sCXBMvh/KMtjYuJqvHPFh0Hz+NUyCMsVMoqmRreiv5LGMcW6Z28t6CDeHRtT4WWKE/DUJy5D+lXg5jC5MQTnkdcFVyl9bK2mSV7WKT1KDd8iQsEpNhbxnFWqEUqTpJeq1fdlwqSVH4+6fHQkCiM936Q1uGfO+678vjcF8nb04nNhPruetDRRV5CzFOu0xn1fjLNceGY/DV4NMEOQk+BDH0orsHB7G2MxlkLaOAzGDIq50="
  - secure: "jvfC2QpHAirPMeX1yb+Q2vh7OHxA2+PYfvIenWHQYEklVUG3n76xZcAF0Q2NJc879056z+Ge2b7j+99ppV+cS3xsnTZSAnpPcgxoRWXCEp5TzP0kPeOqGUAL2xad5l2y8F8pmfFYTRb3VmUpdpdgyKNIJ6EEt8THyzCI4xdATl4vwss/6FJFh9ULWEWDv8UjReUXzGvE/ZfhTQIU5JGFYiviFEJ/fzK/yEa2WZiVn1jUx1sQ2N//FNDhsGiUyIbYioeTCnnWoCxGJVIm9xK1Rqxm4G7asfSCaRBANPvr63sfR0amgAiVPg9kI5zzKpwv+uCzpIBjGPI1a4W7Xbzc1Dt3YrSXJSA2AZzQ5KbB6vSnK8fjyVkfz1q0H2wQWuY1WlFMZcgvOvYvQTCjg21MRQhTUnosaEYWIMzgb1q0dx6NVWgZZYtiZVOpRnspmJZ2nDCpm2m7Y5x15AZh1Wa5FixYCqPGhMlTjsCGG2a0+bZ2TTM5qV6e+Xogq03nUCOke9ILEtQOdAINeF81XdFzXkgLQvz079ZA7l5y8j6ShCEOv0zfQs+iwBUx+M8A7Y2hhxdaeTQRHOL1pCyM3WmnstfGfg9hrTZfshpCyu6Wd+VSUlBny8WtXNdKkasiTIjHHafleIW3aHK9PMQ/GBlqao5zb2tA+zAqECF08J3fCE0="
