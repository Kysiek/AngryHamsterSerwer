addons:
    apt:
        packages:
            - sshpass
env:
  global:
  - secure: hn0FlTrkYEeuWUI6mDBj4WC5G1lkh5Xg2dyJiSifeLuK9YG4KFDxRcyA0hPIqpL/SV9rAn+zNItSZoKICN2vwWV8E3k0cK2VjkAKQhUahnZ9th0wbU4bX5WwYDSdKKzqAtatXUs27i0RrM7WANZAehJRwD9ISBDVkZQ04LOYIRJWCnxaQ/OkYLX0zBWcdKG05jLELzWyVA+ZdhfPb+WaqeGOjWVYnsd++tdmlR0jpgANm4eu9ve7bAPsg//i5NuuuLr11xtJ9+I1Vpzv2tUwYX6+8+Ts4y0q6Jj5gcFUu8c3hoIkLYunHM1559trbY0CbTJSLstcJFW+TJHzQkwLhuTGZhBhclRrRYYwi56Loch5EadjrETAzIK8d2ZGF7Td0BZpB+jzrQk3xaMOco/0lDkowPXDoazXpBsMuQET2k6tnGUV9oh7aBnyPtlQbj5eHNVshSFpPpGZTLP/u2+MCbuqANpZgx2AzAM/4tfIdoEDsAAO+/eNMYVZD31tUh1k6X6ygSgpfkfruNq/zixs8UuNb7Sju2u8tw3PhEz/uw1Kyo/FTDB9/V00XJtdvq/AmmHGJgJM13IHLrfj1PuI2ebC7I7+D6+mObfIv7pmGGARUHfqNkvKz11nTW7CVhSkjz1DmDsGAib5cFndizAPmN63676bRDvyFXoQIEVcX8c=
  - secure: rQePFD4LEfFH2NQnZQpC2AqSVV4kb2xiMIvrnprnR/ER6nJd7r4myyKDcpladtIoyticWkYzzFLTfbSEgBM5c4wIxaXGXMVKwOHfIOufK4XgRVvUv1as0bFbHAdiP7dGyufGaygVoonqIiDhlka1O256QVHItfq/xoniZBcqANb8oNOJei4b3BcWC2eKiE1/YZYaX9FIek9NWmLzwnXRrWoI1Ojxok4B7BRKXCiQcYQ6EZf2C5oOyDPO3Kdhfe4E9s3aEpcukJ4q5jrm6gRL0u3mlPZD8akwyhg/VkOfK7SIGzwoT15bCqM00DAgKD1a+gklrBs+Xeg5YaJCpN/guA5cnHU84DhoT36mhpdYwkTgMlrPdfpgJrKZIh7nCZn8xXjrqIbXz+TlXDDS4USaV593x3RKGrM+JpNtNgCd8eG8XrQCsW0hY3rVLu9Mhmu9QY62eUbasT8+fRUed8a+OnBSVl13XS/hWlQ1Hfo+WXTIZmsK3LFlt34xYOFLVz1wJxSspnYOGaPwEll9GZ7xgwXVzICT5ZHxlEyPSBcxEp4bvqDxSn0MOoqKaryv/1EbEXVsUtOEjf8a1qnJcyz+eAyH7JZh93nV5FhdZ1PRrMddBvUJcKWBCN66sKuxpcoN03oWBt4a+PU44D5tGunjO09+o4zNm092FAdm9UK+6tU=
  - secure: NU+9yewQ5fCW8o75kylpdKWPsQkLqd9zwnCAPZEtkNYPl/kejM/ylUBlbNePUKaSF2hEJkD6Vla823uo7ZqD39P06jSKukPqKTLjMcsSVdrHlPUrzuBe4W95v0qtnVyIXzViOWs07A/8cb68mRMsKJfgasq6R7R86UuhCjTYoHD8LAiso4iiExMyvAbXMCSq/rmjxKCCrEnhtFsjVfbeTUN6Gb3PGC2CfZydSEOqx0IfPZnz46Qeu5iWyGCRYjSPuYvgBFu7C4KquogKFVhuQ1u8j0hbW6iSm70nIGvB5hRJJKADRXmy/1Bj1MvPk+nMEcXrneIzuYWoi96/f6scyCePR12+4kzoWExL5PO0kcdAbBKArGgPXOFXUyQLT91VJjodrYIVTU09cIqkG4/+NmgAQA+lFddoMsSqZoKPP1fhsWqbb3/M9psok6ADgUB80E5SL4UFLSePIMvCJn072KuY7gh93l4xxMRTsLjDiOz0E7K3DBfH7ldnssHPM3PC0mgptFR8jOZHZ8QG/whjkbpWgHK3SLk1UN/46mglDOnJvRYKtXajnMtXoRe96Q3kQd8lwh9+i8vTFJD3M/dNbmodHCi/PH1ADU+C6Ai6NJr12lYl93X6H5HlEeHAfAa0dlTExlKSvkxYq9gZmRAumPynI+UxsVtCzZQaXb7iXIE=
  - secure: km8Y738jSN6jeQ7Wd2UAWWUjlt3B8yJd2V2qhougc4pNwy5onr1Fhd1am5arXxLO1P0IRfiP6pwAwaINZx++vELW2DEZ7G5Csz1MsjSBmRNotWDxOIMQzRSXAB1o5Eg2A4noEE0WdwOLZIk6XDethrEra5Aeuu9oHslHGCCTYuGgxTb84KmUAegTLfNGkbCYoIp9s1Gsi29LDpaOwNEbqEU1K0yXDBJWN+zMko1qLXvFlQ3IbpP8JV05TsJigtpVkNtI+46GMFGbGAQUoBLERL+BMHToGanqbIo4/PwT8XFVkdJ8i11ftLN66m/DHZTpxM2DwT2LTYsBFwnf21JOlf9Rm6Owu28VQ5EwGFWHo7wEPZvXZgocpFxHuwsRR1m9JV0WA7x5dwbxJkI6nfAD0VbVlm5qs/EzW9SSj+9qR11JpFHOs55rJggIp3dH3Tjg3gvSO104yI+7mTQGYNsxjtLsp5laXoHT0gr1+N4ZtQ3rHklwO1vvdktfh9i/XCxdpTcwQoKQN3t+X1NAdJjqXU/rM4x0hfJxM/ZzA4oIWt87XPpRQ+dOwxJxkLu55RNvKiyh1xULuT709AVEHx6Fgeu85LdhfWTUidYP2HPpVtDHTKm2tYXVr8xoHYOJxD/2uw5zVizgNqpRBvfHYxb5mIpN7d6pzpj95Fyy5tNdn5w=
  - secure: MqYQ113datkIipYmkDXBb1q8fvzoXcHdkJQF3PYo+/B82MMg9bVtlwWekE5iqyR+Y72hl/FqHZD2FRlxW7CpVvkck/hdzax2Gaeq4BUYvMgsPNTDTcWadqunY24E0w6KTip/9qHfSBR4dzelxIzLWAIFOtGnudH164nxN5PgFoUJkM+CoPy2ALwn9gRDaSxpA5Fqdxe2SC6DsUTylBw4vtC17YY6iTC0T4fK89VYTYgEGL2dm0XTrDC8ZR8aczVz7Fi+zgR5JVvhcoybrmbA1HdPoA/gD79A28w1n9XgKqfoKoUdCVwHn0UrMQnbKSTTT4Hf+t4BtKivz39H6m8fG0alQooo6vOIZqvC62dewzY4aRS5DtwP4LyovhjCzw5ZmDpk1p63aItGYZmarjU05U4/HyXk5oIsTPzFE6QEcyoZ52Nq15dLJq8OJmhUMVICEADgMwYFV5rUQ+dLghlokZ0C2mMm6SLmNcNpEzdAnDX6w4+9yk0JxVkfMh2oxu+Ah9QH6G6ndGgPWrKmKe6pd8WAJFwZeC58hztVdkpW6cWBDOdYK9rVdNc9LMSpzDMO4hq1hly3cfaFqceO3X+rnsEXk3SN/NQaclXoKpH5mLjAuysX09oWm2VhnHPgG393Juk+IbeYWmz8t9d2YLslbF82qcE90gspt0fIGTwMh2M=

language: node_js
node_js:
- '4.1'
install: npm install
before_script:
- mysql -u root < ./database/createDB.sql
- npm install -g mocha

after_success:
    - mkdir build
    - mv * build
    - tar -czf package.tgz build
    - export SSHPASS=$DEPLOY_PASS
    - sshpass -e scp package.tgz $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_PATH
    - sshpass -e ssh $DEPLOY_USER@$DEPLOY_HOST $DEPLOY_PATH/deploy.sh